<Project Sdk="Microsoft.NET.Sdk.WindowsDesktop">

  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <TargetFrameworks>net4.8;net5.0-windows</TargetFrameworks>
    <UseWPF>true</UseWPF>
    <UseWindowsForms>true</UseWindowsForms>
    <ApplicationIcon>Properties\Icons\icon.ico</ApplicationIcon>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\H.NET.Core\H.NET.Core.csproj" />
    <ProjectReference Include="..\Utilities\Plugins\Plugins.csproj" />
    <ProjectReference Include="..\Utilities\CommandsStorage\CommandsStorage.csproj" />
    <ProjectReference Include="..\Utilities\Hook\Hook.csproj" />
    <ProjectReference Include="..\Utilities\Screenshoter\Screenshoter.csproj" />
    <ProjectReference Include="..\Utilities\Startup\Startup.csproj" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Caliburn.Micro" Version="4.0.153-rc" />
    <PackageReference Include="H.Pipes.AccessControl" Version="1.14.4" />
    <PackageReference Include="Hardcodet.NotifyIcon.Wpf.NetCore" Version="1.0.14" />
    <PackageReference Include="System.Drawing.Common" Version="5.0.0" />
  </ItemGroup>

  <ItemGroup>
    <Resource Include="Resources\beep.wav" />
    <Resource Include="Properties\Icons\icon.ico" />
  </ItemGroup>

  <Target Name="PreBuild" BeforeTargets="PreBuildEvent">
    <Exec Command="taskkill /f /t /fi &quot;imagename eq $(TargetName).exe&quot;&#xD;&#xA;exit 0" />
  </Target>

</Project>